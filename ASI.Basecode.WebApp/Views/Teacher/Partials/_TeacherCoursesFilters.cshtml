@{
    var programs = ViewBag.Programs as List<string> ?? new List<string>();
    var yearLevels = ViewBag.YearLevels as List<int> ?? new List<int>();
}

<div class="container-fluid bg-white rounded-4 p-4 shadow-sm mb-4 teacher-filter-container">
    <form asp-action="AssignedCourses" method="get" id="filterForm">
        
        <!-- FILTERING ROW -->
        <div class="row g-2 align-items-end">

            <!-- Filter by ID Number -->
            <div class="col-md-2">
                <label class="form-label fw-semibold">ID Number</label>
                <div class="input-group">
                    <input type="text" class="form-control" name="searchId" id="searchId"
                           placeholder="Search ID No." value="@ViewBag.SearchId">
                </div>
            </div>

             <!-- Filter by Last Name -->
            <div class="col-md-2">
                <label class="form-label fw-semibold">Last Name</label>
                <div class="input-group">
                    <input type="text" class="form-control" name="searchLastName" id="searchLastName"
                           placeholder="Search Last Name" value="@ViewBag.SearchLastName">
                </div>
            </div>

            <!-- Filter by First Name -->
            <div class="col-md-2">
                <label class="form-label fw-semibold">First Name</label>
                <div class="input-group">
                    <input type="text" class="form-control" name="searchFirstName" id="searchFirstName"
                           placeholder="Search First Name" value="@ViewBag.SearchFirstName">
                </div>
            </div>

            <!-- Filter by Program -->
            <div class="col-md-2">
                <label class="form-label fw-semibold">Program</label>
                <select class="form-select" name="program" id="filterProgram">
                    <option value="">All Programs</option>
                    @foreach (var program in programs)
                    {
                        @if (ViewBag.FilterProgram as string == program)
                        {
                            <option value="@program" selected>@program</option>
                        }
                        else
                        {
                            <option value="@program">@program</option>
                        }
                    }
                </select>
            </div>

            <!-- Filter by Year Level -->
            <div class="col-md-2">
                <label class="form-label fw-semibold no-wrap">Year Level</label>
                <select class="form-select" name="yearLevel" id="filterYearLevel">
                    <option value="">All Levels</option>
                    @foreach (var year in yearLevels)
                    {
                        var yearSuffix = year == 1 ? "st" : year == 2 ? "nd" : year == 3 ? "rd" : "th";
                        var isSelected = ViewBag.FilterYearLevel as int? == year;
                        if (isSelected)
                        {
                            <option value="@year" selected>@year@yearSuffix Year</option>
                        }
                        else
                        {
                            <option value="@year">@year@yearSuffix Year</option>
                        }
                    }
                </select>
            </div>

            <!-- Filter by Remarks (Dropdown: Passed, Failed, Incomplete) -->
            <div class="col-md-2">
                <label class="form-label fw-semibold">Remarks</label>
                <select class="form-select" name="searchRemarks" id="searchRemarks">
                    <option value="">All Remarks</option>
                    @{
                        var searchRemarks = ViewBag.SearchRemarks as string;
                        var remarks = new List<string> { "PASSED", "FAILED", "INCOMPLETE" };
                    }
                    @foreach (var remark in remarks)
                    {
                        @if (searchRemarks == remark)
                        {
                            <option value="@remark" selected>@remark</option>
                        }
                        else
                        {
                            <option value="@remark">@remark</option>
                        }
                    }
                </select>
            </div>
        </div>

        <hr class="my-3" style="border-top: 2px solid #dee2e6;">

        <!-- SORTING ROW -->
        <div class="row g-2 align-items-end">

            <!-- Sort By -->
            <div class="col-md-2">
                <label class="form-label fw-semibold">Sort By</label>
                <select class="form-select" name="sortBy" id="sortBy">
                    @{
                        var sortBy = ViewBag.SortBy as string ?? "lastName";
                        var sortOptions = new Dictionary<string, string>
                        {
                            { "lastName", "Last Name" },
                            { "firstName", "First Name" },
                            { "idnumber", "ID Number" },
                            { "programyear", "Program/Year" },
                            { "remarks", "Remarks" },
                            { "final", "Final Grade" }
                        };
                    }
                    @foreach (var option in sortOptions)
                    {
                        @if (sortBy == option.Key)
                        {
                            <option value="@option.Key" selected>@option.Value</option>
                        }
                        else
                        {
                            <option value="@option.Key">@option.Value</option>
                        }
                    }
                </select>
            </div>

            <!-- Sort Order -->
            <div class="col-md-2">
                <label class="form-label fw-semibold">Order</label>
                <select class="form-select" name="sortOrder" id="sortOrder">
                    @{
                        var sortOrder = ViewBag.SortOrder as string ?? "asc";
                        var orderOptions = new List<(string, string)>
                        {
                            ("asc", "Ascending"),
                            ("desc", "Descending")
                        };
                    }
                    @foreach (var order in orderOptions)
                    {
                        @if (sortOrder == order.Item1)
                        {
                            <option value="@order.Item1" selected>@order.Item2</option>
                        }
                        else
                        {
                            <option value="@order.Item1">@order.Item2</option>
                        }
                    }
                </select>
            </div>
        </div>
    </form>
</div>
