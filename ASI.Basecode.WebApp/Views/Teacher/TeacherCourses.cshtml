@{
    Layout = "~/Views/Shared/Layouts/_MainLayout.cshtml";
    ViewData["Title"] = "Assigned Courses";
    ViewData["PageHeader"] = "Assigned Courses";
}

@section Styles {
    <link rel="stylesheet" href="~/css/main-site.css" />
}

<div class="container-fluid">
    <div class="container-fluid">
        <ul class="nav nav-tabs mb-3" id="gradeTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="grade-view-tab" data-bs-toggle="tab" data-bs-target="#grade-view" type="button" role="tab" aria-controls="grade-view" aria-selected="true">
                    Grade View
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="grade-entry-tab" data-bs-toggle="tab" data-bs-target="#grade-entry" type="button" role="tab" aria-controls="grade-entry" aria-selected="false">
                    Grade Entry
                </button>
            </li>
        </ul>
        <div class="tab-content" id="gradeTabsContent">
            <div class="tab-pane fade show active" id="grade-view" role="tabpanel" aria-labelledby="grade-view-tab">
                <!-- Content for Grade View tab -->
                <p>Display grades here.</p>
            </div>
            <div class="tab-pane fade" id="grade-entry" role="tabpanel" aria-labelledby="grade-entry-tab">
                <!-- Content for Grade Entry tab -->
                
                <div class="card shadow-sm">
                    <div class="card-body">
                        <h4 class="mb-3">Class Schedule</h4>
                        <div class="table-responsive">
                            <table class="table table-bordered align-middle">
                                <thead class="table-light">
                                    <tr>
                                        <th>EDP Code</th>
                                        <th>Subject</th>
                                        <th>Type</th>
                                        <th>Units</th>
                                        <th>Date & Time</th>
                                        <th>Room</th>
                                        <th>Section</th>
                                        <th>Course</th>
                                        <th>Status</th>
                                        <th>Exam</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>37256</td>
                                        <td>CS-FREEEL</td>
                                        <td>LEC</td>
                                        <td>3</td>
                                        <td>MWF ( 6:30 PM - 7:30 PM)</td>
                                        <td>A2 404</td>
                                        <td>4A</td>
                                        <td>BSCS</td>
                                        <td>9/28/25</td>
                                        <td>
                                            <select class="form-select form-select-sm">
                                                <option selected>Prelim</option>
                                                <option value="Midterm">Midterm</option>
                                                <option value="Semi-final">Semi-final</option>
                                                <option value="Final">Final</option>
                                            </select>
                                        </td>
                                        <td>
                                            <div class="btn-group">
                                                <button class="btn btn-sm btn-outline-primary" title="Edit" onclick="showEditPanel('37256', 'CS-FREEEL', 'MWF ( 6:30 PM - 7:30 PM)')">
                                                    Edit
                                                </button>
                                                <button class="btn btn-sm btn-outline-warning" title="Upload">
                                                    Upload
                                                </button>
                                                <button class="btn btn-sm btn-outline-success" title="Save">
                                                    To PDF
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>37248</td>
                                        <td>CS-OPSYS41</td>
                                        <td>LAB</td>
                                        <td>2</td>
                                        <td>TTH ( 6:01 PM - 7:31 PM)</td>
                                        <td>C3</td>
                                        <td>4A</td>
                                        <td>BSCS</td>
                                        <td>9/28/25</td>
                                        <td>
                                            <select class="form-select form-select-sm">
                                                <option selected>Prelim</option>
                                                <option value="Midterm">Midterm</option>
                                                <option value="Semi-final">Semi-final</option>
                                                <option value="Final">Final</option>
                                            </select>
                                        </td>
                                        <td>
                                            <div class="btn-group">
                                                <button class="btn btn-sm btn-outline-primary" title="Edit" onclick="showEditPanel('37256', 'CS-FREEEL', 'MWF ( 6:30 PM - 7:30 PM)')">
                                                    Edit
                                                </button>
                                                <button class="btn btn-sm btn-outline-warning" title="Upload">
                                                    Upload
                                                </button>
                                                <button class="btn btn-sm btn-outline-success" title="Save">
                                                    To PDF
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Edit Grades of Students -->
                <div id="editPanel" class="col-12 mt-3 d-none" style="height: 40vh; overflow-y: auto;">
                    <div class="card border-primary shadow-sm">
                        <div class="card-header bg-primary text-white fw-bold d-flex align-items-left">Edit Grades</div>
                        <div class="card-header bg-white d-flex justify-content-between align-items-center">
                            <div>
                                <strong>EDP Code:</strong> <span id="edpCodeText"></span> &nbsp; | 
                                <strong>Subject:</strong> <span id="subjectText"></span> &nbsp; | 
                                <strong>Schedule:</strong> <span id="scheduleText"></span>
                            </div>
                            <div>
                                <button class="btn btn-sm btn-outline-primary" title="Save" onclick="showSaveSuccess()">Save</button>
                                <button class="btn btn-sm btn-outline-danger" title="Cancel" onclick="hideEditPanel()">Cancel</button>
                            </div>
                        </div>
                        <div class="card-body p-0">
                            <div class="table-responsive">
                                <table class="table table-bordered mb-0">
                                    <thead class="table-light">
                                        <tr>
                                            <th>No.</th>
                                            <th>ID Number</th>
                                            <th>Last Name</th>
                                            <th>First Name</th>
                                            <th>Course/Year</th>
                                            <th>Gender</th>
                                            <th>Prelim</th>
                                            <th>Midterm</th>
                                            <th>Semi-final</th>
                                            <th>Final</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Placeholder student list -->
                                        <tr>
                                            <td>1</td>
                                            <td>20185484</td>
                                            <td>ANINO</td>
                                            <td>SHANA AYNN</td>
                                            <td>BSCS 4</td>
                                            <td>F</td>
                                            <td><input type="text" value="1.2" readonly class="form-control form-control-sm" /></td>
                                            <td><input type="text" class="form-control form-control-sm" /></td>
                                            <td><input type="text" readonly class="form-control form-control-sm" /></td>
                                            <td><input type="text" readonly class="form-control form-control-sm" /></td>
                                        </tr>
                                        <tr>
                                            <td>2</td>
                                            <td>20158484</td>
                                            <td>VALDEHUESA</td>
                                            <td>GODDESS PHOEBE</td>
                                            <td>BSCS 4</td>
                                            <td>F</td>
                                            <td><input type="text" value="1.1" readonly class="form-control form-control-sm" /></td>
                                            <td><input type="text" class="form-control form-control-sm" /></td>
                                            <td><input type="text" readonly class="form-control form-control-sm" /></td>
                                            <td><input type="text" readonly class="form-control form-control-sm" /></td>
                                        </tr>
                                        <!-- More rows here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function showEditPanel(edpCode, subject, schedule) {
            document.getElementById("edpCodeText").innerText = edpCode;
            document.getElementById("subjectText").innerText = subject;
            document.getElementById("scheduleText").innerText = schedule;
            document.getElementById("editPanel").classList.remove("d-none");
        }

        function hideEditPanel() {
            document.getElementById("editPanel").classList.add("d-none");
        }

        function showSaveSuccess() {
            alert("Grades saved successfully!");
            hideEditPanel();
        }
    </script>
}

